---
layout: page
title: HTTP Headers and features
parameters : 
  a :
    name : Accept-Encoding/Content-Encoding
    required : optional 
    description : <p>When possible, the client should ask for compressed content to save bandwidth with the <code><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.3">Accept-Encoding</a></code> header. Accepted value should be <code>compress</code> and <code>gzip</code>. If requested by the client, the server should answer with header <code>Content-Encoding</code> set to the correct value and the content compressed accordingly.</p><pre>Accept-Encoding&colon; compress, gzip</pre>
  b :
    name : Accept-Language
    required : optional
    description : <p>Most of the fields of the open511 API are enumeration and fixed value data but some fields contain free text data. For the jurisdiction who would like to support multiple language, language negociation is integrated in the API.</p><p>The client application should specify the prefered language with the <code><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.4">Accept-Language</a></code> header. This header allows to specify an order of priority, for example <code>pt, en, *</code> to get portuguese at first, then english and finally antyhing available.</p><p>The server should answer to server the corresponding language. If no accept-language header is provided, the server will select the language.</p><p>If the client sends the value star <code>*</code>, the server should send all the languages supported (only available in XML).</p><p>The server should answer with the contant-language header.<pre>Accept-Language&colon; pt, en<br>Content-Language&colon; en</pre>The URL parameter <code><a href="parameters.html#parameters-lang">lang</a></code> can override the HTTP header.</p>
  c :
    name : Etag/If-None-Match
    required : optional
    description : <p>ETag/If-None-Match headers are used to save bandwith and increase caching efficiency. The servers should provide an <code><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.19">ETag</a></code> header in the resources that are served.<p></p>When requesting the same URL, the client should add the <code><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.26">If-None-Match</a></code> header with the last ETag value. The server will send the content only if the ETag has changed.</p><pre>ETag&colon; "xyzzy"<br>If-None-Match&colon; "xyzzy"</pre>
  d :
    name : Accept
    required : optional
    description : <p>Open511 resource support multiple representations (XML and JSON, more could be added in the future). In order to ease the negociation of the content type, the client should provide an 
  e :
    name : Authentication
    required : optional
    description : <p>Read access to the resource should be open and not protected by any authentication. In order to modify data (e.g crowdsourcing), the client might need and authentication system. This only authentication mechanism is HTTP Basic.</p>
  f :
    name : Encryption
    required : optional
    description : <p>Although no sensitive data is exchanges through the open511 API, it could be good practice to support HTTPS encryption.</p>
---
{% include JB/setup %}

{% include specsnav.html %}

<p>Presentation.</p>


<h3>Encoding and other formatting elements</h3>

<p>Here are some general guidelines about encoding and formatting</p>

<ul>
  <li>Character encoding must be in UTF-8</li>
  <li>DateTime and Date fields will follow the ISO 8601 subset as per the <a href="http://www.w3.org/TR/NOTE-datetime">W3c note</a> except when specified otherwise</li>
  <li>When a timezone has to be specified, it should use a timezone name from the <a href="http://en.wikipedia.org/wiki/Tz_database">TZ Database</a></li>
  <li>Geospatial data will follow existing standards:
    <ul>
      <li>In XML, geometries will use <a href="http://en.wikipedia.org/wiki/Geography_Markup_Language">GML notation</a></li>
      <li>In JSON, the geometries will use <a href="http://www.geojson.org/">GeoJSON</a></li>
    </ul>
  </li>
  <li>In XML, links will use the <a href="http://tools.ietf.org/html/rfc4287">Atom link structure</a> and will use the IANA <a href="http://www.iana.org/assignments/link-relations/link-relations.xml">link relation list</a> where relevant</li>
</ul>


<h3>Choose the response format</h3>

<p>In order to ease integration in various contexts, Open511 supports two formats (or representation): XML and JSON. The client can specify the format he wants to receive using the following options:</p>
<ul>
  <li>HTTP Header <code><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.1">Accept</a></code> header specifying the type of representation accepted. For the moment, the value accepted are <code>application/xml</code> and <code>application/json</code>. The server must answer with the appropriate <code>Content-Type</code> header.</li>
  <li>URL parameter <code><a href="parameters.html#parameters-format">format</a></code> can also be used (and will override the HTTP header if both are present. Accepted values are <code>xml</code> and <code>json</code></li>
</ul>

<p>An XSD schema for the XML representation will be provided once the data structure is stabilized</p>

<h3>Bandwidth optimization</h3>

<p>Since the API has good chances to be used by mobile application, bandwidth optimization is an important criteria. Clients and servers should support the follow features:</p>

<ul>
  <li>Conditional request with <code><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.19">ETag</a></code> (for the server) and <code><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.26">If-None-Match</a></code> (for the client) HTTP headers. See <a href="http://developer.yahoo.com/performance/rules.html#etags">Configure ETags</a> and <a href="http://en.wikipedia.org/wiki/HTTP_ETag">Wikipedia</a>.</li>
  <li>Compression with HTTP header <code><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.3">Accept-Encoding</a></code> and <code>Content-Encoding</code> is encouraged</li>
</ul>


<h3>Authentication and encryption mechanisms</h3>

<p>Authentication and encryption are considered to be managed by the regular HTTP layer. Authentication and encryption are optional and left to the decision of each implementation within the following limits in order to meet interoperability targets:</p>
<ul>
  <li>Authentication: The only authentication mechanism supported is <a href="http://www.httpwatch.com/httpgallery/authentication/">HTTP Basic</a></li>
  <li>Encryption: The only encryption supported <a href="https://en.wikipedia.org/wiki/HTTP_Secure">HTTPS</a></li>
</ul>


<h3>Choose your language</h3>

<p>Open511 has the ability to support multiple languages. The negociation of the language can be done in two ways:
  <ul>
  <li>HTTP Header <code><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.4">Accept-Language</a></code> header specifies the language that the client accepts. For the moment, the value accepted are <code>application/xml</code> and <code>application/json</code>. The server must answer with the appropriate <code>Content-Type</code> header.</li>
  <li>URL parameter <code>Accept-Language</code> can also be used (and will override the HTTP header if both are present) with the same values as the HTTP header.
</ul>

<p>In order to use the Accept-Language selector (either HTTP or URL parameter), the client provides a list of supported language in order of priority. For example <code>pt, en</code> for to get Portuguese at first and then english.</p>

<p>The answer message will contain information about the language. In XML, the <code>xml:lang</code> will provide the language used for the answer. In JSON, a custom attribute <code>lang</code> will specify the language used, including for event lists in several language.</p>

<p>Mixed language (some fields in a language, some other fields in an other language) will not be supported. The XML representation should provide all the languages avaiable for all the fields when no Accept-Language is provided (either in HTTP or URL). In this case, each free-text field must contain a <code>xml:lang</code> attribute.</p>

